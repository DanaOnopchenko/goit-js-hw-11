{"mappings":"YAIA,IAAMA,EAAO,CACTC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,KAAMH,SAASC,cAAc,cAC7BG,MAAOJ,SAASC,cAAc,cAGlCI,QAAQC,IAAIR,EAAKC,MAEjBD,EAAKC,KAAKQ,iBAAiB,UAe3B,SAAsBC,GACnBA,EAAIC,iBACHC,EAAcF,EAAIG,cAAcC,SAASC,YAAYC,MAAMC,OAC3DV,QAAQC,IAAI,cAAeI,E,IAf/B,IAAIM,EAAO,EAEPC,EAAY,EAQZP,EAAc,GASlB,IAAMQ,EAAW,IAAIC,sBAiCrB,SAAgBC,EAASC,GACrBD,EAAQE,SAAQ,SAAAC,GACRA,EAAMC,iBACNnB,QAAQC,IAAI,aAEZmB,EADAT,GAAQ,GACQU,MAAK,SAAAC,GACjB7B,EAAKI,QAAQ0B,mBAAmB,YAAaC,EAAYF,EAAKG,OAC9Db,EAAYc,KAAKC,KAAKL,EAAKM,UA1D3B,KA2DIjB,IAASC,GAC7BI,EAASa,UAAUpC,EAAKM,M,QAKpBC,QAAQC,IAAIc,E,GA9DF,CACZe,KAAM,KACNC,WAAY,QACZC,UAAW,IAcb,SAASZ,EAAUa,EAAaC,GAC5B,IAEMC,EAAU,YAAoBC,OAvBxB,IAuBwB,4DACnC,OAAOC,MAAM,GAAmBD,OAFhB,2BAES,SAAoBA,OAH9B,qCAGyB,OAAyBA,OAApBH,EAAY,UAAgBG,OAARF,EAAK,KAAWE,OAARD,IAAWd,MAAK,SAAAiB,GACtF,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAEd,OAAOF,EAAKG,KAAK,G,IAUzB,SAASjB,EAAYkB,GACjB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAGC,EAAYD,EAAZC,aAAcC,EAAIF,EAAJE,KAAMC,EAAKH,EAALG,MAAOC,EAAKJ,EAALI,MAAOC,EAAQL,EAARK,SAAUC,EAASN,EAATM,U,MAAgB,6CAEhDd,OAAtBS,EAAa,WAENT,OAFeU,EAAK,6DAGpBV,OADAW,EAAM,2BAEHX,OADHY,EAAM,8BAEDZ,OADFa,EAAS,gCACGb,OAAVc,EAAU,6B,IAErBC,KAAK,G,CAhBlB/B,IAAYC,MAAK,SAAAC,GACb7B,EAAKI,QAAQ0B,mBAAmB,YAAaC,EAAYF,EAAKG,OAC9DZ,EAASuC,QAAQ3D,EAAKM,M,IACvBsD,OAAM,SAAAC,G,OAAKtD,QAAQC,IAAIqD,E","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\n\n\n\nconst refs = {\n    form: document.querySelector('#search-form'),\n    gallery: document.querySelector('.gallery'),\n    load: document.querySelector('.load-more'),\n    quard: document.querySelector('.js-guard')\n}\n\nconsole.log(refs.form)\n// refs.load.addEventListener('click', onLoadMore)\nrefs.form.addEventListener('submit', onFormSubmit);\n\n\nlet page = 1;\nconst perPage = 100;\nlet totalPage = 0;\n\nlet options = {\n  root: null,\n  rootMargin: '150px',\n  threshold: 1.0,\n};\n\nlet searchQuery = '';\n\nfunction onFormSubmit(evt) { \n   evt.preventDefault();\n    searchQuery = evt.currentTarget.elements.searchQuery.value.trim();\n    console.log('searchQuery', searchQuery)\n}\n\n\nconst observer = new IntersectionObserver(onLoad, options);\n\nfunction photosApi(searchQuery, page) { \n    const API_KEY = '31885081-e3ce08364707c8044635d8ba7'\n    const BASE_URL = 'https://pixabay.com/api/'\n    const filters = `per_page=${perPage}&image_type=photo&orientation=horizontal&safesearch=true`\n     return fetch(`${BASE_URL}?key=${API_KEY}&q=${searchQuery}&page=${page}&${filters}`).then(resp => { \n        if (!resp.ok){ \n            throw new Error()\n        }\n        return resp.json('')\n    })\n}\n\nphotosApi().then(data => { \n    refs.gallery.insertAdjacentHTML('beforeend', creatMarkup(data.hits))\n    observer.observe(refs.quard)\n}).catch(err=>console.log(err))\n\n\nfunction creatMarkup(arr) { \n    return arr.map(({ webformatURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"photo-card\">\n<img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n<div class=\"info\">\n<p><b>Likes: </b>${likes}</p>\n<p><b>Views: </b>${views}</p>\n<p><b>Comments: </b>${comments}</p>\n <p><b>Downloads: </b>${downloads}</p>\n  </div>\n    </div>`).join('')\n}\n\nfunction onLoad(entries, observer) { \n    entries.forEach(entry => {\n        if (entry.isIntersecting) { \n            console.log('I see you');\n            page += 1;\n            photosApi(page).then(data => { \n                refs.gallery.insertAdjacentHTML('beforeend', creatMarkup(data.hits));\n                totalPage = Math.ceil(data.totalHits/perPage);\n                if (page === totalPage) { \nobserver.unobserve(refs.quard)\n                }  \n            })\n        }\n    });\n    console.log(entries)\n}\n// function photosApi(page=1) { \n//     const API_KEY = '31885081-e3ce08364707c8044635d8ba7'\n//     const BASE_URL = 'https://pixabay.com/api/'\n//     const filters = `per_page=100&image_type=photo&orientation=horizontal&safesearch=true`\n//      return fetch(`${BASE_URL}?key=${API_KEY}&q=cat&page=${page}&${filters}`).then(resp => { \n//         if (!resp.ok){ \n//             throw new Error()\n//         }\n//         return resp.json('')\n//     })\n// }\n\n// photosApi().then(data => { \n// refs.gallery.insertAdjacentHTML('beforeend',creatMarkup(data.hits))\n// }).catch(err=>console.log(err))\n\n// function creatMarkup(arr) { \n//     return arr.map(({ webformatURL, tags, likes, views, comments, downloads }) => `\n//     <div class=\"photo-card\">\n// <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n// <div class=\"info\">\n// <p><b>Likes: </b>${likes}</p>\n// <p><b>Views: </b>${views}</p>\n// <p><b>Comments: </b>${comments}</p>\n//  <p><b>Downloads: </b>${downloads}</p>\n//   </div>\n//     </div>`).join('')\n// }\n\n// function onLoadMore() { \n//     page += 1;\n// photosApi(page).then(data => { \n//     refs.gallery.insertAdjacentHTML('beforeend', creatMarkup(data.hits));\n//     totalPage = Math.ceil(data.totalHits/perPage);\n//     if (page === totalPage) {\n// refs.load.setAttribute('hidden',true)\n//      }\n// }).catch(err=>console.log(err))\n// }"],"names":["$b8f9b7833fa37166$var$refs","form","document","querySelector","gallery","load","quard","console","log","addEventListener","evt","preventDefault","$b8f9b7833fa37166$var$searchQuery","currentTarget","elements","searchQuery","value","trim","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$totalPage","$b8f9b7833fa37166$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$b8f9b7833fa37166$var$photosApi","then","data","insertAdjacentHTML","$b8f9b7833fa37166$var$creatMarkup","hits","Math","ceil","totalHits","unobserve","root","rootMargin","threshold","searchQuery1","page1","filters","concat","fetch","resp","ok","Error","json","arr","map","param","webformatURL","tags","likes","views","comments","downloads","join","observe","catch","err"],"version":3,"file":"index.43e29bdd.js.map"}